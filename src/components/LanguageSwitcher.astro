---
interface Props {
  lang: 'cs' | 'en';
}

const { lang } = Astro.props;
const currentPath = Astro.url.pathname;
---

<div class="flex items-center gap-0.5 text-xs font-mono">
  <a 
    href="/cs" 
    class:list={[
      "px-2 py-1 rounded-md transition-all",
      lang === 'cs' ? "text-accent bg-accent/10" : "text-surface-500 hover:text-white"
    ]}
    data-lang-switch="cs"
    data-target={currentPath.replace(/^\/en/, '/cs')}
  >
    CZ
  </a>
  <span class="text-surface-700">/</span>
  <a 
    href="/en" 
    class:list={[
      "px-2 py-1 rounded-md transition-all",
      lang === 'en' ? "text-accent bg-accent/10" : "text-surface-500 hover:text-white"
    ]}
    data-lang-switch="en"
    data-target={currentPath.replace(/^\/cs/, '/en')}
  >
    EN
  </a>
</div>

<script>
  document.querySelectorAll('[data-lang-switch]').forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const target = (link as HTMLAnchorElement).dataset.target;
      const newLang = (link as HTMLAnchorElement).dataset.langSwitch;
      if (target && newLang) {
        localStorage.setItem('ondys-lang', newLang);
        window.location.href = target;
      }
    });
  });
</script>
